<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="demodemo.css">
    <title>DemoDemo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 

    <script type="text/javascript" src="common/common.js"></script> 
    <script type="text/javascript" src="common/generation.js"></script> 
    <script type="text/javascript" src="common/population.js"></script>
    <script type="text/javascript" src="common/budget.js"></script>
    <script type="text/javascript" src="common/scenario.js"></script>
    <script type="text/javascript" src="charts/chartHistory.js"></script>
    <script type="text/javascript" src="charts/chartHistpop.js"></script>
    <script type="text/javascript" src="charts/chartPopulation.js"></script>
    <script type="text/javascript" src="charts/chartStats.js"></script>
    <script type="text/javascript" src="scenarios/bacasable.js"></script>
    <script type="text/javascript" src="scenarios/economy.js"></script>    
    <script type="text/javascript" src="scenarios/educrois.js"></script>
    <script type="text/javascript" src="common/demodemo.js"></script> 
    <script>
      window.onload = function() { 
        changeScenario();
      }

      changeScenario = function() {
        try {
          demodemo.destroy();
        } catch (error) {
          console.log("No data to destroy");
        }
        let scenario_id = document.getElementById("selector_scenario").value;
        scenario =  eval(`new ${scenario_id}()`);
        demodemo = new DemoDemo(scenario); 

        document.getElementById("tooltip_scenario").innerHTML = scenario.help;
        document.getElementById("label_description").innerHTML = scenario.description;
      }

      function openTab(evt, cityName) {
        var i, tabcontent, tablinks;

        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
      }    
    </script>

  </head>
  <body>
    <div>
      <h1>D√©moD√©mo : un d√©monstrateur de d√©mographie √©ducative</h1>
    </div>
    <div class="toolbar">
      <select name="scenario" id="selector_scenario" onchange="changeScenario()">
        <option value="Economy">Economie</option>
        <option value="EduCrois">√âducation et Croissance</option>
        <option value="BacASable">Bac √† sable</option>
      </select>
      <div class="tooltip">‚ùì<span id="tooltip_scenario" class="tooltipbigtext">Tooltip text</span></div>
      <div class="tooltip">
        <input type="button" value="üîÉ" onClick="changeScenario()">
        <span class="tooltiptext">Recommencer le sc√©nario</span>
      </div>
      <label class="description_label" id="label_description">Description</label>
    </div>
    <hr> 
    <div class="toolbar">
      <span id="infos">
        <div class="tooltip">
          <input type="button" value="‚ñ∂Ô∏è" onClick="demodemo.updateData()">
          <span class="tooltiptext">Avancer d'un ann√©e</span>
        </div>        
      </span>
    </div>
    <hr> 
    <div id="inputs">  
    </div>
    <hr> 
    <div>
	    <canvas id="popChart", height="100"></canvas>
    </div>

    <!-- Tab content -->
    <div class="tab">
      <button class="tablinks" onclick="openTab(event, 'historyChartTab')">Historique</button>
      <button class="tablinks" onclick="openTab(event, 'statsChartTab')">Population</button>
      <button class="tablinks" onclick="openTab(event, 'histpopChartTab')">Historique Population</button>
      <button class="tablinks" onclick="openTab(event, 'educationTableTab')">Budget √©ducation</button>
      <button class="tablinks" onclick="openTab(event, 'populationTableTab')">Budget nation</button>
    </div>

    <div id="historyChartTab" class="tabcontent">
      <canvas id="historyChart", height="100"></canvas>
    </div>

    <div id="histpopChartTab" class="tabcontent">
      <canvas id="histpopChart", height="100"></canvas>
    </div>

    <div id="statsChartTab" class="tabcontent">
      <canvas id="statsChart", height="100"></canvas>
    </div>

    <div id="educationTableTab" class="tabcontent">
      <table class="educationTable" id="educationTable"></table>
    </div>

    <div id="populationTableTab" class="tabcontent">
      <table class="populationTable" id="populationTable"></table>
    </div>
  
  </body>
</html>